spring.application.name=demo

# Server configuration
server.port=${SERVER_PORT:8080}

# SQL Server datasource (dev)
spring.datasource.url=${DATABASE_URL:jdbc:sqlserver://localhost:1433;databaseName=nicephim;encrypt=false;trustServerCertificate=true;loginTimeout=10}
spring.datasource.username=${DATABASE_USERNAME:sa}
spring.datasource.password=${DATABASE_PASSWORD:Aa@123456}
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# Connection pool
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=10000

# Actuator (optional for health)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# Flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# Media storage (local HLS serving)
media.upload.dir=${MEDIA_UPLOAD_DIR:D:/HUTECH/HK10/ProjectMMT/NicePhim/media/uploads}
media.hls.dir=${MEDIA_HLS_DIR:D:/HUTECH/HK10/ProjectMMT/NicePhim/media}
media.ffmpeg.path=${MEDIA_FFMPEG_PATH:D:/HUTECH/HK10/ProjectMMT/ffmpeg/bin/ffmpeg.exe}

# Image storage directories
media.poster.dir=${MEDIA_POSTER_DIR:D:/HUTECH/HK10/ProjectMMT/NicePhim/media/posters}
media.banner.dir=${MEDIA_BANNER_DIR:D:/HUTECH/HK10/ProjectMMT/NicePhim/media/banners}

# Static resource mapping for HLS and images via Spring (no Nginx)
spring.web.resources.static-locations=classpath:/static/,file:${media.hls.dir}/,file:${media.poster.dir}/,file:${media.banner.dir}/
spring.mvc.contentnegotiation.media-types.m3u8=application/vnd.apple.mpegurl
spring.mvc.contentnegotiation.media-types.ts=video/mp2t
spring.mvc.contentnegotiation.media-types.m4s=video/iso.segment

# File upload configuration
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:500MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:500MB}

